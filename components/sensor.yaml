#Random
  - platform: mfi
    host: 192.168.5.11
    port: 6443
    verify_ssl: false
    username: Bakkoda
    password: !secret unifi_password

  - platform: openhardwaremonitor
    host: 192.168.1.10

  - platform: darksky
    api_key: !secret darksky_apikey
    forecast:
      - 0
    monitored_conditions:
      - apparent_temperature
      - precip_probability

#SNMP Monitoring
  - platform: snmp
    name: 'ERL WAN in'
    host: 192.168.1.1
    baseoid: 1.3.6.1.2.1.31.1.1.1.6.3
    community: 'doghouse'
    version: '2c'
    scan_interval: 10

  - platform: snmp
    name: 'ERL WAN out'
    host: 192.168.2.1
    baseoid: 1.3.6.1.2.1.31.1.1.1.10.3
    community: 'doghouse'
    version: '2c'
    scan_interval: 10

  - platform: statistics
    name: 'ERL WAN in Stats'
    entity_id: sensor.erl_wan_in
    sampling_size: 4
    max_age:
      hours: 24

  - platform: statistics
    name: 'ERL WAN out Stats'
    entity_id: sensor.erl_wan_out
    sampling_size: 4
    max_age:
      hours: 24

#Certificate Expirations
  - platform: cert_expiry
    host: bakkoda.com

  - platform: cert_expiry
    host: uvc.bakkoda.com

  - platform: cert_expiry
    host: librenms.bakkoda.com

  - platform: cert_expiry
    host: kanban.bakkoda.com

  - platform: cert_expiry
    host: hass.bakkoda.com

  - platform: cert_expiry
    host: scarylegrunners.com

#Media
  - platform: sonarr
    api_key: !secret sonarr_apikey
    host: 192.168.1.10
    port: 8989
    urlbase: /sonarr
    ssl: false
    monitored_conditions:
      - series
      - upcoming
      - wanted
    days: 7

  - platform: sonarr_upcoming_media
    api_key: !secret sonarr_apikey
    host: 192.168.1.10
    port: 8989
    days: 2
    ssl: false
    max: 10

  - platform: radarr
    api_key: !secret radarr_apikey
    host: 192.168.1.10
    port: 7878
    urlbase: /radarr
    ssl: false
    monitored_conditions:
      - movies
      - upcoming
    days: 28

  - platform: radarr_upcoming_media
    api_key: !secret radarr_apikey
    host: 192.168.1.10
    port: 7878
    days: 120
    ssl: false
    theaters: false
    max: 10

  - platform: tautulli
    api_key: !secret tautulli_api_key
    host: 192.168.1.10
    path: /plexpy

#SLR Tracking
  - platform: rest
    name: melissas_miles_json
    resource: !secret melissas_json_url
    scan_interval:
        minutes: 10
    json_attributes:
      - range
      - majorDimension
      - values

  - platform: rest
    name: wills_miles_json
    resource: !secret wills_json_url
    scan_interval:
        minutes: 10
    json_attributes:
      - range
      - majorDimension
      - values

#MQTT
  - platform: mqtt
    name: "Ansible status"
    state_topic: "homeassistant/ansible/status"

  - platform: mqtt
    name: "Pihole status"
    state_topic: "homeassistant/pihole/status"

  - platform: mqtt
    name: "Personal backups"
    state_topic: "homeassistant/backups/personal"

  - platform: mqtt
    name: "Personal backups (Ext)"
    state_topic: "homeassistant/backups/personal_ext"

  - platform: mqtt
    name: "Servers backups"
    state_topic: "homeassistant/backups/servers"

  - platform: mqtt
    name: "Servers backups (Ext)"
    state_topic: "homeassistant/backups/servers_ext"

  - platform: mqtt
    name: "Critical backups"
    state_topic: "homeassistant/backups/critical"

  - platform: mqtt
    name: "Weekly backups"
    state_topic: "homeassistant/backups/weekly"

  - platform: mqtt
    name: "Database backups"
    state_topic: "homeassistant/backups/databases"

  - platform: mqtt
    name: "Now Playing"
    state_topic: "homeassistant/plex/nowplaying"
    value_template: "{{ value_json.body }}"

#Templates
  - platform: template
    sensors:
        livingroom_thermo_setpoint:
            friendly_name: "Living Room Thermostat"
            unit_of_measurement: 'Â°F'
            value_template: "{{ states.climate.stelpro_stzw402_electronic_thermostat_mode.attributes.temperature }}"

        zwave_heavydoor_battery:
            friendly_name: "Inside Garage Door Sensor"
            unit_of_measurement: '%'
            value_template: "{{ states.zwave.hank_hkzw_dws01_door_window_sensor.attributes.battery_level }}"

        zwave_kitchenmotion_battery:
            friendly_name: "Kitchen Motion Sensor"
            unit_of_measurement: '%'
            value_template: "{{ states.zwave.vision_zp3102_pir_motion_sensor.attributes.battery_level }}"

        zwave_basement4in1_battery:
            friendly_name: "Basement 4in1 Sensor"
            unit_of_measurement: '%'
            value_template: "{{ states.zwave.vision_security_zp3111_multisensor_4in1.attributes.battery_level }}"

        zwave_attic4in1_battery:
            friendly_name: "Attic 4in1 Sensor"
            unit_of_measurement: '%'
            value_template: "{{ states.zwave.vision_security_zp3111_multisensor_4in1_3.attributes.battery_level }}"

        zwave_shocksensor_clothesdryer_battery:
            friendly_name: "Clothes Dryer Sensor"
            unit_of_measurement: '%'
            value_template: "{{ states.zwave.vision_zs5101_shock_and_vibration_sensor_2.attributes.battery_level }}"

        zwave_shocksensor_washingmachine_battery:
            friendly_name: "Washing Machine Sensor"
            unit_of_measurement: '%'
            value_template: "{{ states.zwave.vision_zs5101_shock_and_vibration_sensor_3.attributes.battery_level }}"

        melissas_miles:
            friendly_name: "Melissa's Miles"
            value_template: >
                {{ states.sensor.melissas_miles_json.attributes["values"][0][0] }} / {{ states.sensor.melissas_miles_json.attributes["values"][0][1] }}
            unit_of_measurement: 'miles'

        wills_miles:
            friendly_name: "Will's Miles"
            value_template: >
                {{ states.sensor.wills_miles_json.attributes["values"][0][0] }} / {{ states.sensor.wills_miles_json.attributes["values"][0][1] }}
            unit_of_measurement: 'miles'

        tautulli_count_total:
            friendly_name: 'Total streams'
            value_template: '{{ states.sensor.tautulli.attributes["stream_count_transcode"] }}'

        tautulli_count_transcode:
            friendly_name: 'Transcoded streams'
            value_template: '{{ states.sensor.tautulli.attributes["stream_count_transcode"] }}'

        tautulli_direct_plays:
            friendly_name: 'Direct Plays'
            value_template: '{{ states.sensor.tautulli.attributes["stream_count_direct_play"] }}'

        tautulli_direct_streams:
            friendly_name: 'Direct Streams'
            value_template: '{{ states.sensor.tautulli.attributes["stream_count_direct_stream"] }}'

        tautulli_wan_bandwidth:
            friendly_name: 'WAN bandwidth'
            value_template: '{{ states.sensor.tautulli.attributes["wan_bandwidth"] | multiply(0.001) | round(2) }}'
            unit_of_measurement: "Mbps"

        tautulli_lan_bandwidth:
            friendly_name: 'LAN bandwidth'
            value_template: '{{ states.sensor.tautulli.attributes["lan_bandwidth"] | multiply(0.001) | round(2) }}'
            unit_of_measurement: "Mbps"

        tautulli_total_bandwidth:
            friendly_name: 'Total bandwidth'
            value_template: '{{ states.sensor.tautulli.attributes["total_bandwidth"] | multiply(0.001) | round(2) }}'
            unit_of_measurement: "Mbps"

        internet_in_mbps:
            friendly_name: 'ERL Down'
            value_template: "{{ (state_attr('sensor.erl_wan_in_stats','change_rate')|float*8*(state_attr('sensor.erl_wan_in_stats', 'sampling_size')-1)/1000000)|round(2) }}"
            unit_of_measurement: 'MBps'
            entity_id: sensor.erl_wan_in_stats

        internet_out_mbps:
            friendly_name: 'ERL Up'
            value_template: "{{ (state_attr('sensor.erl_wan_out_stats','change_rate')|float*8*(state_attr('sensor.erl_wan_out_stats', 'sampling_size')-1)/1000000)|round(2) }}"
            unit_of_measurement: 'MBps'
            entity_id: sensor.erl_wan_out_stats
