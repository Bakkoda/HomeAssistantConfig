######################################################################
#       Perimeter
######################################################################
  - alias: Motion detection on the porch
    initial_state: True
    trigger:
        platform: state
        entity_id: binary_sensor.front_porch_motion
        from: 'off'
        to: 'on'
    action:
      - service: notify.discord_bot
        data_template:
            message: "***HA*** - Motion detected on the front porch - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 450273546716053505
      - delay:
            minutes: 1

  - alias: Motion detection in the Garage
    initial_state: True
    trigger:
        platform: state
        entity_id: binary_sensor.garage_camera_motion_active
        from: 'off'
        to: 'on'
    action:
      - service: notify.discord_bot
        data_template:
            message: "***HA*** - Motion detected in the Garage - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 450273546716053505
      - delay:
            minutes: 1

  - alias: Perimeter notification (Open)
    initial_state: True
    trigger:
        platform: state
        entity_id: binary_sensor.perimeter_heavydoor
        from: 'off'
        to: 'on'
    action:
        service: notify.discord_bot
        data_template:
            message: "***HA*** - {{ trigger.to_state.attributes.friendly_name }} has been opened - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 450273546716053505

  - alias: Perimeter notification (Closed)
    initial_state: True
    trigger:
        platform: state
        entity_id: binary_sensor.perimeter_heavydoor
        from: 'on'
        to: 'off'
    action:
        service: notify.discord_bot
        data_template:
            message: "***HA*** - {{ trigger.to_state.attributes.friendly_name }} has been closed - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 450273546716053505

  - alias: Cat Motion Detection
    initial_state: True
    trigger:
        platform: state
        entity_id: binary_sensor.perimeter_kitchenmotion
        from: 'off'
        to: 'on'
    action:
      - service: notify.discord_bot
        data_template:
            message: "***HA*** - The cats are probably pooping - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 450273546716053505

######################################################################
#       Perimeter device fixes
######################################################################
# Clothes Dryer fixes
  - alias: Clothes Dryer detection on fix
    initial_state: True
    trigger:
        platform: state
        entity_id: sensor.vision_zs5101_shock_and_vibration_sensor_alarm_level_2
        from: '0'
        to: '255'
    action:
        service: input_boolean.turn_on
        data:
            entity_id: input_boolean.clothes_dryer


  - alias: Clothes Dryer detection off fix
    initial_state: True
    trigger:
        platform: state
        entity_id: sensor.vision_zs5101_shock_and_vibration_sensor_alarm_level_2
        from: '0'
        to: '255'
        for:
            seconds: 30
    action:
        service: input_boolean.turn_off
        data:
            entity_id: input_boolean.clothes_dryer

#Washing Machine fixes
  - alias: Washing Machine detection on fix
    initial_state: True
    trigger:
        platform: state
        entity_id: sensor.vision_zs5101_shock_and_vibration_sensor_alarm_level_3
        from: '0'
        to: '255'
    action:
        service: input_boolean.turn_on
        data:
            entity_id: input_boolean.washing_machine


  - alias: Washing Machine detection off fix
    initial_state: True
    trigger:
        platform: state
        entity_id: sensor.vision_zs5101_shock_and_vibration_sensor_alarm_level_3
        from: '0'
        to: '255'
        for:
            seconds: 30
    action:
        service: input_boolean.turn_off
        data:
            entity_id: input_boolean.washing_machine
