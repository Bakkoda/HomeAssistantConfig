######################################################################
#       Server Monitoring
######################################################################
  - alias: 'Monitor hard drive temps'
    initial_state: on
    trigger:
        platform: numeric_state
        entity_id:
          - sensor.kennel_wdc_wd1003fbyz_010fb0_temperatures_temperature
          - sensor.kennel_st3000vn000_1h4167_temperatures_temperature
          - sensor.kennel_st3000vn000_1h4167_temperatures_temperature_2
          - sensor.kennel_st3000vn000_1h4167_temperatures_temperature_3
          - sensor.kennel_st3000vn000_1hj166_temperatures_temperature
          - sensor.kennel_st3000vn000_1hj166_temperatures_temperature_2
        above: 105
    action:
        service: notify.discord_bot
        data_template:
            message: "***HA*** - {{ trigger.to_state.attributes.friendly_name }} is currently above 105° F with a temp of {{ trigger.to_state.state }}° F @here - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 613741597594615828

  - alias: 'Ansible updates'
    initial_state: True
    trigger:
        platform: state
        entity_id: sensor.ansible_status, sensor.pihole_status
    action:
        service: notify.discord_bot
        data_template:
            message: "***HA*** - {{ trigger.to_state.attributes.friendly_name }} has been updated - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 450273546716053505

  - alias: 'Arq updates'
    initial_state: True
    trigger:
        platform: state
        entity_id: sensor.servers_backups, sensor.personal_backups
    action:
        service: notify.discord_bot
        data_template:
            message: "***Arq*** - **{{ trigger.to_state.attributes.friendly_name }} backups completed** - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 322823957658992651

  - alias: 'Veeam updates'
    initial_state: True
    trigger:
        platform: state
        entity_id: sensor.critical_backups, sensor.weekly_backups
    action:
        service: notify.discord_bot
        data_template:
            message: "***Veeam*** - **{{ trigger.to_state.attributes.friendly_name }} VM backups completed** - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 322823957658992651

  - alias: 'Monitor SSL expirations'
    initial_state: on
    trigger:
        platform: numeric_state
        entity_id:
          - sensor.bakkoda_com
          - sensor.unifi_video
          - sensor.librenms
          - sensor.kanboard
          - sensor.hassio
          - sensor.scary_leg_runners
        below: 7
    action:
        service: notify.discord_bot
        data_template:
            message: "***HA*** - {{ trigger.to_state.attributes.friendly_name }} is set to expire in {{ trigger.to_state.state }} days @here - {{now().strftime('%B %d, %Y at %I:%M%p')}}"
            target: 613741597594615828
